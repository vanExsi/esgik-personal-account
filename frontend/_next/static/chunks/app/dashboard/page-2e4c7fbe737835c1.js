(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{470:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(5155),r=t(2115),l=t(5695),n=t(4260),c=t(8482),i=t(8145),d=t(7168),x=t(8136),m=t(7434),h=t(7580);let o=(0,t(9946).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var j=t(7809),u=t(6874),f=t.n(u);function p(e){let{objects:s,notifications:t,user:r,profile:l}=e,n=s.filter(e=>"in_progress"===e.status),u=s.filter(e=>"completed"===e.status),p=e=>{let s={new:{label:"Новый",variant:"secondary"},in_progress:{label:"В работе",variant:"default"},completed:{label:"Завершен",variant:"secondary"},cancelled:{label:"Отменен",variant:"destructive"}};return s[e]||s.new};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Личный кабинет"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Управляйте своими заказами и документами"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ZB,{className:"text-sm font-medium",children:"Активные объекты"}),(0,a.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:n.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"объектов в работе"})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ZB,{className:"text-sm font-medium",children:"Завершенные"}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:u.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"объектов завершено"})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ZB,{className:"text-sm font-medium",children:"Уведомления"}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"непрочитанных"})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ZB,{className:"text-sm font-medium",children:"Всего объектов"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"за все время"})]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ZB,{children:"Последние объекты"}),(0,a.jsx)(c.BT,{children:"Ваши недавние заказы и их статус"})]}),(0,a.jsx)(f(),{href:"/dashboard/objects",children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",children:["Все объекты",(0,a.jsx)(o,{className:"ml-2 h-4 w-4"})]})})]})}),(0,a.jsx)(c.Wu,{children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Нет объектов"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Начните с заказа услуги"}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(f(),{href:"/dashboard/services",children:(0,a.jsxs)(d.$,{children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Заказать услугу"]})})})]}):(0,a.jsx)("div",{className:"space-y-4",children:s.slice(0,5).map(e=>{var s;let t=p(e.status);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.address}),(0,a.jsx)(i.E,{variant:t.variant,children:t.label})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(s=e.services)||void 0===s?void 0:s.name," • ",e.cadastral_number]}),e.manager_name&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Менеджер: ",e.manager_name]})]}),(0,a.jsxs)("div",{className:"text-right",children:[e.cost&&(0,a.jsxs)("p",{className:"font-medium",children:[e.cost.toLocaleString()," ₽"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("ru-RU")})]})]},e.id)})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(c.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,a.jsx)(f(),{href:"/dashboard/services",children:(0,a.jsxs)(c.aR,{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-5 w-5"}),"Заказать услугу"]}),(0,a.jsx)(c.BT,{children:"Выберите нужную геодезическую или кадастровую услугу"})]})})}),(0,a.jsx)(c.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,a.jsx)(f(),{href:"/dashboard/documents",children:(0,a.jsxs)(c.aR,{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Документы"]}),(0,a.jsx)(c.BT,{children:"Просмотрите и подпишите необходимые документы"})]})})}),(0,a.jsx)(c.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,a.jsx)(f(),{href:"/dashboard/profile",children:(0,a.jsxs)(c.aR,{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),"Профиль"]}),(0,a.jsx)(c.BT,{children:"Обновите личную информацию и настройки"})]})})})]})]})}function N(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(null),[c,i]=(0,r.useState)(null),[d,x]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{let s=localStorage.getItem("currentUser");if(!s){e.push("/auth/login");return}let a=JSON.parse(s);t(a),i({id:a.id,phone:a.phone,first_name:a.first_name,last_name:a.last_name,middle_name:a.middle_name}),x(!1)},[e]),d)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Загрузка..."});if(!s)return null;let m=[{id:"1",address:"г. Орехово-Зуево, ул. Ленина, д. 1",cadastral_number:"50:23:0010101:1",status:"in_progress",services:{name:"Межевой план"},created_at:new Date().toISOString()}],h=[{id:"1",title:"Новый документ для подписи",message:"Поступил межевой план для подписи",type:"document",is_read:!1,created_at:new Date().toISOString()}];return(0,a.jsx)(n.A,{user:s,profile:c,notifications:h,children:(0,a.jsx)(p,{objects:m,notifications:h,user:s,profile:c})})}},5601:(e,s,t)=>{Promise.resolve().then(t.bind(t,470))}},e=>{var s=s=>e(e.s=s);e.O(0,[874,132,865,260,441,684,358],()=>s(5601)),_N_E=e.O()}]);